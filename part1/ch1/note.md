# 第 1 章 : マイクロサービス API とは何か

- マイクロサービスは、システムの各コンポーネントが個別にデプロイされるサービスとして設計及び構築されるアーキテクチャパターンである。これにより、コードベースがより小さく管理しやすいものになり、各サービスの最適化とスケーリングが独立した状態で行えるようになる。

- モノリスは、アプリケーション全体が 1 つのビルドとしてデプロイされ、同じプロセスで実行されるアーキテクチャパターンである。このため、アプリケーションのデプロイと監視はこちらの方が容易だが、コードベースが大きくなるとそれだけデプロイが難しくなる。

- アプリケーションでは、UI、CLI、API など、何種類かのインターフェイスを使うことができる。API は、コードまたはターミナルから、アプリケーションとプログラミング的にやり取りできるようにするインターフェイスである。

- Web API は、Web サーバー上で実行され、データトランスポートとして HTTP を使う API である。本書では、Web API を使って、サービスの機能にインターネット経由でアクセスできるようにする。

- マイクロサービスは、スマートエンドポイントと「ダムパイプ」を使って相互にやり取りする。ダムパイプは、あるコンポーネントから別のコンポーネントにデータを転送するだけのパイプである。マイクロサービス用のダムパイプの代表的な例は HTTP である。HTTP は、そこで使われている API プロトコルのことは何も知らずに、API クライアントと API サーバーの間でデータをやり取りする。このため、Web API はマイクロサービス間の統合を促進するのに適したテクノロジーである。

- マイクロサービスには様々な利点があるが、次のような課題もある。

  - **サービスの効果的な分解** : 特定のサブドメインを中心として、明確な境界を持つサービスを設計する必要がある。
  - **マイクロサービスの統合テスト** : 全てのマイクロサービスの統合テストを実行するのは難しい課題だが、API が正しく実装されるようにすれば、統合の失敗リスクを減らすことができる。
  - **サービスが利用できない状況への対処** : 連携するサービスは、サービスの利用停止、リクエストのタイムアウト、処理のエラーに対して脆弱であるため、そうしたシナリオに対処できなければならない。
  - **分散トランザクションの追跡** : 複数のサービスにまたがってエラーを追跡するのは困難であり、ソフトウェアテレメトリツールにより、ログの一元的な管理、API の可視化、サービスにまたがるリクエストの追跡が可能になる。
  - **運用の複雑さとインフラのオーバーヘッドの増大** : マイクロサービスごとにインフラ（サービス、監視システム、アラートなどの）プロビジョニングが必要であるため、インフラの自動化にさらに労力を投入する必要がある。

- ドキュメント駆動開発は、次の 3 つのステップからなる API 開発フローである。

  - API の設計と文書化
  - API ドキュメントに従って API を構築
  - API ドキュメントに対して API をテスト

- API ドキュメントを開発プロセスの最前線に置くドキュメント駆動開発は、API 開発者が直面する数多くの一般的な問題を回避し、そのようにして API の統合が失敗する可能性を減らすのに役立つ。
